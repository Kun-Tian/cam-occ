<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cam-occ: src/g2m/canonLine.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>src/g2m/canonLine.hh</h1>  </div>
</div>
<div class="contents">
<a href="canon_line_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *   Copyright (C) 2010 by Mark Pictor                                     *</span>
<a name="l00003"></a>00003 <span class="comment"> *   mpictor@gmail.com                                                     *</span>
<a name="l00004"></a>00004 <span class="comment"> *                                                                         *</span>
<a name="l00005"></a>00005 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
<a name="l00006"></a>00006 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
<a name="l00007"></a>00007 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<a name="l00008"></a>00008 <span class="comment"> *   (at your option) any later version.                                   *</span>
<a name="l00009"></a>00009 <span class="comment"> *                                                                         *</span>
<a name="l00010"></a>00010 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
<a name="l00011"></a>00011 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
<a name="l00012"></a>00012 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
<a name="l00013"></a>00013 <span class="comment"> *   GNU General Public License for more details.                          *</span>
<a name="l00014"></a>00014 <span class="comment"> *                                                                         *</span>
<a name="l00015"></a>00015 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
<a name="l00016"></a>00016 <span class="comment"> *   along with this program; if not, write to the                         *</span>
<a name="l00017"></a>00017 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
<a name="l00018"></a>00018 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
<a name="l00019"></a>00019 <span class="comment"> ***************************************************************************/</span>
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef CANONLINE_HH</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define CANONLINE_HH</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;limits.h&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;Handle_AIS_Shape.hxx&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="canon_8hh.html">canon.hh</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="machine_status_8hh.html">machineStatus.hh</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="tool_8hh.html">tool.hh</a>&quot;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">//TODO: add methods to set and get display options for the obj - i.e. color, shading, ...</span>
<a name="l00035"></a>00035 <span class="comment">//so objs with trouble can be highlighted. same for start and end move, rapid, canned cycles(?), ...</span>
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844a275aac2213ab7bf7021d2dd7f27becf2">00037</a> <span class="keyword">enum</span> <a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844">DISPLAY_MODE</a> { NO_DISP,           <span class="comment">//this object is not displayed</span>
<a name="l00038"></a><a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844a743295a96785bac3afc7610c8282b84d">00038</a>                     THIN_MOTION,       <span class="comment">//show myUnSolid for canonMotion, and nothing else</span>
<a name="l00039"></a><a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844aad9e1f4f6bdc037721d7b0e1c76a0bc4">00039</a>                     THIN,              <span class="comment">//show myUnSolid for all</span>
<a name="l00040"></a><a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844a285d336f2b079506bea6b7e8f99e89f8">00040</a>                     ONLY_MOTION,       <span class="comment">//show myShape for canonMotion, or myUnSolid if solid fails</span>
<a name="l00041"></a><a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844a200f932b77f5e7406f9afb7a70d8fb6e">00041</a>                     <a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844a200f932b77f5e7406f9afb7a70d8fb6e">BEST</a>               <span class="comment">//show solid where possible, myUnSolid otherwise</span>
<a name="l00042"></a>00042                   };
<a name="l00043"></a>00043 
<a name="l00050"></a><a class="code" href="classcanon_line.html">00050</a> <span class="keyword">class </span><a class="code" href="classcanon_line.html" title="A canonLine object represents one canonical command. Each gcode line produces one or more canonical c...">canonLine</a>: <span class="keyword">protected</span> <a class="code" href="classcanon.html" title="Class canon was created so canonLine and machineStatus could easily share some things. The only shared items are the unimplemented function abc2dir, and the types degrees and toolNumber. At this time, the list of tools will be handled within the machineStatus class.">canon</a> {
<a name="l00051"></a>00051   <span class="keyword">public</span>:
<a name="l00052"></a><a class="code" href="classcanon_line.html#af1bce08c43f7a5bb5a73ecebf9279db6">00052</a>     <span class="keyword">const</span> std::string <a class="code" href="classcanon_line.html#af1bce08c43f7a5bb5a73ecebf9279db6">getLine</a>() {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#a3496308cd55334a5d2904c272c1acf0e">myLine</a>;};
<a name="l00053"></a><a class="code" href="classcanon_line.html#a279888442733fd0e3dc768f8dbf78e62">00053</a>     <span class="keyword">const</span> gp_Ax1 <a class="code" href="classcanon_line.html#a279888442733fd0e3dc768f8dbf78e62">getStart</a>() {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#acb38ae34a594b0a7e117495be2546399">status</a>.<a class="code" href="classmachine_status.html#a881d395803b3e583768c53d7c9d09042">getStartPose</a>();};
<a name="l00054"></a><a class="code" href="classcanon_line.html#a63e54490a5e2fd69908174b3d3b6e516">00054</a>     <span class="keyword">const</span> gp_Ax1 <a class="code" href="classcanon_line.html#a63e54490a5e2fd69908174b3d3b6e516">getEnd</a>() {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#acb38ae34a594b0a7e117495be2546399">status</a>.<a class="code" href="classmachine_status.html#a1c2a32eed790f05523655ff22a882f44">getEndPose</a>();};
<a name="l00055"></a>00055     <span class="keywordtype">int</span> <a class="code" href="classcanon_line.html#a046a01d50bc61abe11244421b75b136d" title="returns the number after N on the line, -1 if none">getN</a>(); <span class="comment">//returns the number after N on the line, -1 if none</span>
<a name="l00056"></a>00056     <span class="keywordtype">int</span> <a class="code" href="classcanon_line.html#aee5797d1e94aa4e525ba980f4c49ef6c" title="returns the canon line number">getLineNum</a>(); <span class="comment">//returns the canon line number</span>
<a name="l00057"></a>00057     <span class="keyword">const</span> <a class="code" href="classmachine_status.html" title="This class contains the machine&amp;#39;s state for one canonical command. The information stored include...">machineStatus</a>* <a class="code" href="classcanon_line.html#a8045f5cc93cee527123d57a4de754445" title="returns the machine&amp;#39;s status after execution of this canon line">getStatus</a>(); <span class="comment">//returns the machine&#39;s status after execution of this canon line</span>
<a name="l00058"></a>00058     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#a63fadf2dfb9815127aa01271e4fb6cc7">isMotion</a>() = 0;
<a name="l00059"></a>00059     <span class="keyword">virtual</span> <a class="code" href="machine_status_8hh.html#abd6d177d63e98aa1b4ed4b8329e2a379">MOTION_TYPE</a> <a class="code" href="classcanon_line.html#a4346c4d0a9972c2f883625c87a4459c8">getMotionType</a>() = 0;
<a name="l00060"></a>00060     <span class="keyword">static</span> <a class="code" href="classcanon_line.html" title="A canonLine object represents one canonical command. Each gcode line produces one or more canonical c...">canonLine</a>* <a class="code" href="classcanon_line.html#aef4afba5e1dccf8c6867d2be370afad5">canonLineFactory</a> (std::string l, <a class="code" href="classmachine_status.html" title="This class contains the machine&amp;#39;s state for one canonical command. The information stored include...">machineStatus</a> s);
<a name="l00061"></a>00061     <span class="keyword">const</span> std::string <a class="code" href="classcanon_line.html#a45aefea90a04cec1e302c5d214a14376">getCanonType</a>();
<a name="l00062"></a><a class="code" href="classcanon_line.html#aecb5e697d95a7c5b99c57b1e16616830">00062</a>     <span class="keyword">const</span> TopoDS_Shape&amp; <a class="code" href="classcanon_line.html#aecb5e697d95a7c5b99c57b1e16616830">getUnSolid</a>() {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#a53f87f4ed0c22320f23bbd7ed1749252">myUnSolid</a>;};
<a name="l00063"></a>00063     <span class="keyword">virtual</span> <span class="keyword">const</span> TopoDS_Shape&amp; <a class="code" href="classcanon_line.html#a7aaebb9e888cf107e0e7a496e1085d99">getShape</a>()=0;
<a name="l00064"></a><a class="code" href="classcanon_line.html#a771e9a1769948907ffdab9cd0e91183f">00064</a>     <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#a771e9a1769948907ffdab9cd0e91183f">checkErrors</a>() {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#aed6bda35f889c08302fdd907ef766653">solidErrors</a> &amp;&amp; <a class="code" href="classcanon_line.html#a8a4de80dc95bebad25a0ef69267f34cb">unsolidErrors</a>;};
<a name="l00065"></a>00065     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcanon_line.html#afaf5e15df297e5c7563faf7ca0c840c1">display</a>()=0;
<a name="l00066"></a><a class="code" href="classcanon_line.html#a6b16eb02e38d303c236dcda57ee888db">00066</a>     <span class="keywordtype">void</span> <a class="code" href="classcanon_line.html#a6b16eb02e38d303c236dcda57ee888db">setDispMode</a>(<a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844">DISPLAY_MODE</a> m) {<a class="code" href="classcanon_line.html#a156485510b64ff954732afe1fd55285c">dispMode</a> = m;};
<a name="l00067"></a><a class="code" href="classcanon_line.html#a952e212c77d44ce1430bf346fa5457e9">00067</a>     <span class="keywordtype">void</span> <a class="code" href="classcanon_line.html#a952e212c77d44ce1430bf346fa5457e9">setSolidDone</a>() {<a class="code" href="classcanon_line.html#a231a018101820c7ee472d9668f5fb9ea">solidIsDone</a>=<span class="keyword">true</span>;};
<a name="l00068"></a><a class="code" href="classcanon_line.html#a198283dd523677abab9fb832c379aa38">00068</a>     <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#a198283dd523677abab9fb832c379aa38">isSolidDone</a>() {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#a231a018101820c7ee472d9668f5fb9ea">solidIsDone</a>;};
<a name="l00069"></a><a class="code" href="classcanon_line.html#a6e60f0bae5c58fd804052cbb134e4dd2">00069</a>     <span class="keyword">inline</span> std::string <a class="code" href="classcanon_line.html#a6e60f0bae5c58fd804052cbb134e4dd2">cantok</a>(uint n) {
<a name="l00070"></a>00070       <span class="keywordflow">if</span> (n &lt; <a class="code" href="classcanon_line.html#aa5ff804f07988125fd5c360b191336f1">canonTokens</a>.size()) {<span class="keywordflow">return</span> <a class="code" href="classcanon_line.html#aa5ff804f07988125fd5c360b191336f1">canonTokens</a>[n];} <span class="keywordflow">else</span> {
<a name="l00071"></a>00071         cout &lt;&lt; <span class="stringliteral">&quot;malformed input line &quot;</span> &lt;&lt; <a class="code" href="classcanon_line.html#a3496308cd55334a5d2904c272c1acf0e">myLine</a> &lt;&lt; endl;
<a name="l00072"></a>00072         std::string s = <span class="stringliteral">&quot;&quot;</span>; <span class="keywordflow">return</span> s;
<a name="l00073"></a>00073       }
<a name="l00074"></a>00074     }
<a name="l00075"></a>00075     <span class="keyword">const</span> std::string <a class="code" href="classcanon_line.html#ad32f1efae6a717e3eab4f07085b290c1" title="return a line identifier as string: getN() if !=-1, else getLineNum()">getLnum</a>();
<a name="l00076"></a>00076   <span class="keyword">protected</span>:
<a name="l00077"></a>00077     <a class="code" href="classcanon_line.html#ace3b1ed4390162525e62ec32b31f2652">canonLine</a>(std::string canonL, <a class="code" href="classmachine_status.html" title="This class contains the machine&amp;#39;s state for one canonical command. The information stored include...">machineStatus</a> prevStatus);
<a name="l00078"></a><a class="code" href="classcanon_line.html#a3496308cd55334a5d2904c272c1acf0e">00078</a>     std::string <a class="code" href="classcanon_line.html#a3496308cd55334a5d2904c272c1acf0e">myLine</a>;
<a name="l00079"></a><a class="code" href="classcanon_line.html#acb38ae34a594b0a7e117495be2546399">00079</a>     <a class="code" href="classmachine_status.html" title="This class contains the machine&amp;#39;s state for one canonical command. The information stored include...">machineStatus</a> <a class="code" href="classcanon_line.html#acb38ae34a594b0a7e117495be2546399">status</a>; <span class="comment">//the machine&#39;s status *after* execution of this canon line</span>
<a name="l00080"></a><a class="code" href="classcanon_line.html#aa5ff804f07988125fd5c360b191336f1">00080</a>     std::vector&lt;std::string&gt; <a class="code" href="classcanon_line.html#aa5ff804f07988125fd5c360b191336f1">canonTokens</a>;
<a name="l00081"></a>00081     <span class="keywordtype">double</span> <a class="code" href="classcanon_line.html#a7377f0fcdfcbc3d9252267276563bee2">tok2d</a>(uint n);
<a name="l00082"></a>00082     <span class="keywordtype">int</span> <a class="code" href="classcanon_line.html#ab3ce27fbfb556d782b9395db05c7100f">tok2i</a>(uint n,uint offset=0);
<a name="l00083"></a>00083     <span class="keywordtype">void</span> <a class="code" href="classcanon_line.html#a0204ae8c48a4737cf9c8e00d588f807a">tokenize</a>();
<a name="l00084"></a>00084     <span class="keyword">const</span> std::string <a class="code" href="classcanon_line.html#a112a6f737dd35775913339febdd1ce1e">getCanonicalCommand</a>();
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="comment">//TODO: color the displayed shape if one or both of these are true</span>
<a name="l00087"></a><a class="code" href="classcanon_line.html#aed6bda35f889c08302fdd907ef766653">00087</a>     <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#aed6bda35f889c08302fdd907ef766653">solidErrors</a>;
<a name="l00088"></a><a class="code" href="classcanon_line.html#a8a4de80dc95bebad25a0ef69267f34cb">00088</a>     <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#a8a4de80dc95bebad25a0ef69267f34cb">unsolidErrors</a>;
<a name="l00089"></a><a class="code" href="classcanon_line.html#a231a018101820c7ee472d9668f5fb9ea">00089</a>     <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#a231a018101820c7ee472d9668f5fb9ea">solidIsDone</a>;
<a name="l00090"></a><a class="code" href="classcanon_line.html#a156485510b64ff954732afe1fd55285c">00090</a>     <a class="code" href="canon_line_8hh.html#aa694eadcc25ca533db97c79541ebf844">DISPLAY_MODE</a> <a class="code" href="classcanon_line.html#a156485510b64ff954732afe1fd55285c">dispMode</a>;
<a name="l00091"></a>00091 
<a name="l00093"></a><a class="code" href="classcanon_line.html#a53ca9b6556a28f2ebe7b50a721544c2d">00093</a>     <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classcanon_line.html#a53ca9b6556a28f2ebe7b50a721544c2d" title="return true if the canonical command for this line matches &amp;#39;m&amp;#39;">cmdMatch</a>(std::string m) {
<a name="l00094"></a>00094       <span class="keywordflow">if</span> (<a class="code" href="classcanon_line.html#aa5ff804f07988125fd5c360b191336f1">canonTokens</a>.size() &lt; 3)
<a name="l00095"></a>00095         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00096"></a>00096       <span class="keywordflow">return</span> (m.compare(<a class="code" href="classcanon_line.html#aa5ff804f07988125fd5c360b191336f1">canonTokens</a>[2]) == 0); <span class="comment">//compare returns zero for a match</span>
<a name="l00097"></a>00097     };
<a name="l00098"></a>00098 
<a name="l00102"></a><a class="code" href="classcanon_line.html#a53f87f4ed0c22320f23bbd7ed1749252">00102</a>     TopoDS_Shape <a class="code" href="classcanon_line.html#a53f87f4ed0c22320f23bbd7ed1749252">myUnSolid</a>;
<a name="l00103"></a>00103     <a class="code" href="classcanon_line.html#a6f059f0cfdef3e62f7ae3cf64e4d7092">Handle</a>(AIS_Shape) aisShape;
<a name="l00104"></a>00104 };
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="preprocessor">#endif //CANONLINE_HH</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
